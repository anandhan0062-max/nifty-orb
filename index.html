<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NIFTY ORB Assistant</title>

<style>
body {
  margin: 0;
  font-family: system-ui, Arial;
  background: #020617;
  color: #e5e7eb;
}
.container {
  max-width: 420px;
  margin: auto;
  padding: 15px;
}
.card {
  background: #020617;
  border: 1px solid #1e293b;
  border-radius: 14px;
  padding: 12px;
  margin-bottom: 12px;
}
.row {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
}
.signal {
  text-align: center;
  font-size: 26px;
  font-weight: bold;
  padding: 20px;
}
.buy { color: #22c55e; }
.sell { color: #ef4444; }
.wait { color: #eab308; }
.lock { color: #94a3b8; }
.warning { color: #fb7185; font-size: 13px; }
input {
  width: 100%;
  padding: 6px;
  margin-top: 4px;
  border-radius: 8px;
  border: none;
}
</style>
</head>

<body>
<div class="container">

<h3>NIFTY ORB Assistant</h3>

<div class="card">
<div class="row"><span>ORB High</span><input id="orbHigh"></div>
<div class="row"><span>ORB Low</span><input id="orbLow"></div>
</div>

<div class="card">
<div class="row"><span>Price</span><input id="price"></div>
<div class="row"><span>Volume</span><input id="volume"></div>
<div class="row"><span>Avg Vol (5)</span><input id="avgVol"></div>
</div>

<div class="card">
<div class="row"><span>Capital ₹</span><input id="capital" value="10000"></div>
<div class="row"><span>SL Points</span><input id="slPoints"></div>
</div>

<div id="signalBox" class="card signal wait">WAIT</div>

<div id="info" class="card"></div>
<div id="warning" class="warning"></div>

<button onclick="runLogic()">CHECK SIGNAL</button>

</div>

<script>
let trades = 0;
let slHits = 0;

function runLogic() {
  const orbHigh = +orbHighInput.value;
  const orbLow = +orbLowInput.value;
  const price = +priceInput.value;
  const volume = +volumeInput.value;
  const avgVol = +avgVolInput.value;
  const capital = +capitalInput.value;
  const slPoints = +slPointsInput.value;

  const now = new Date();
  const time = now.getHours() + ":" + now.getMinutes();

  const orbRange = orbHigh - orbLow;
  const orbValid = orbRange > 30 && orbRange < 130;

  if (trades >= 2 || slHits >= 2 || time > "14:00" || !orbValid) {
    signalBox.innerText = "LOCKED";
    signalBox.className = "card signal lock";
    warning.innerText = "Trading locked by rules";
    return;
  }

  const risk = capital * 0.01;
  const qty = Math.floor(risk / slPoints);

  let signal = "WAIT";
  let cls = "wait";

  if (price > orbHigh && volume > 1.5 * avgVol) {
    signal = "BUY"; cls = "buy";
  }
  if (price < orbLow && volume > 1.5 * avgVol) {
    signal = "SELL"; cls = "sell";
  }

  signalBox.innerText = signal;
  signalBox.className = `card signal ${cls}`;

  info.innerHTML = `
    ORB Valid: ${orbValid ? "YES" : "NO"}<br>
    Qty: ${qty}<br>
    Max Risk: ₹${risk.toFixed(0)}
  `;
}
</script>

</body>
</html>
